\newcounter{nuserstory}
\newcounter{nusecase}

\newcommand{\userstory}[4]{%
    \refstepcounter{nuserstory}
    \subsection{#1}
    \label{userstory:\thenuserstory}
    \hangindent=40pt
    \textbf{\textit{As a}} #2,\\
    \textbf{\textit{I want to}} #3,\\
    \textbf{\textit{so that}} #4.
}
\newenvironment{usecase}[1]
{
    \refstepcounter{nusecase}%
    \subsection{Use Case \thenusecase: #1}%
    \label{usecase:\thenusecase}%
}{}

% With user stories (\userstory) you can reference them back later with \ref{userstory:n}
% For example, first user story in this file can be referred with \ref{userstory:1}

\chapter{Requirement Analysis}
\label{chap:requirement-analysis}

\section{Stakeholder Analysis}
\label{section:stakeholder-analysis}

\subsection{Primary Stakeholders}
\label{subsection:primary-stakeholders}

\begin{enumerate}[leftmargin=80pt]
    \item \textbf{Users:} The primary stakeholders are the users of our multi-camera tracking system, including security personnel, facility managers, emergency response coordinators, and research analysts.  Their interaction with the system is crucial for effective monitoring, incident response, and data-driven decision-making.  For a detailed specification of our users, see \ref{section:target-user}.
    \item \textbf{System Administrators:}  These individuals are responsible for the installation, configuration, and maintenance of the system.  Their needs include ease of deployment, system stability, and access to diagnostic tools.
    \item \textbf{University/Factory Management:}  These stakeholders are interested in the overall benefits of the system, such as improved safety, optimized resource allocation, and enhanced operational efficiency.  They require reports and data summaries to justify the investment and track performance.
\end{enumerate}

\section{User Stories}
\label{section:user-stories}

%% User Stories Start

\userstory{Continuously Track Individuals Across the Area%
}{security officer%
}{continuously track individuals as they move throughout the monitored area, even when they move between different camera views%
}{I can maintain uninterrupted surveillance of persons of interest and respond quickly to developing situations.}

\userstory{Maintain Tracking During Brief Disappearances%
}{security officer%
}{maintain the track of individuals even if they are temporarily out of sight of all cameras%
}{I can have a complete picture of a person's movements, even if they briefly go around corners or into areas without direct camera coverage.}

\userstory{Visualize Movement Paths%
}{facility manager%
}{see a visual representation of how people move through the facility, including their paths and locations over time%
}{I can understand space usage, identify congestion points, and make informed decisions about facility layout and resource allocation.}

\userstory{Access Historical Movement Data%
}{analytics specialist%
}{access and analyze historical data on individual and group movements, including options to export this data%
}{I can perform in-depth analysis of movement patterns, identify trends, and generate reports to improve operational efficiency and space utilization.  I can also share this data with other systems.}

\userstory{Prioritize Tracking of Specific Individuals%
}{security officer/emergency coordinator%
}{designate specific individuals for increased monitoring and receive immediate updates on their location%
}{I can focus on persons of interest during security incidents or emergencies, ensuring a rapid and effective response.}

\userstory{Ensure System Reliability and Uptime%
}{system administrator%
}{easily monitor system performance, troubleshoot issues, and perform necessary maintenance tasks%
}{I can keep the tracking system running smoothly and minimize disruptions to users.}
%% User Stories End

\section{Use Case Diagram}
\label{section:use-case-diagram}

% \begin{figure}[h!]
%     \centering
%     \begin{tikzpicture}

%         \begin{umlsystem}[x=4]{KU Eater}
%             \umlusecase[name=signup, y=4.5]{Sign Up}
%             \umlusecase[name=login, y=3]{Login}
%             \umlusecase[name=viewrec, y=1, width=2.5cm]{View Recommendations}
%             \umlusecase[name=genrec, x=6.5, y=2, width=2.5cm]{Generate Recommendations}
%             \umlusecase[name=menuinfo, x=4, y=0.25]{See Menu Info}
%             \umlusecase[name=searchmenu, x=1, y=-1]{Search Menu Items}
%             \umlusecase[name=userrec, x=6.5, y=-4, width=3.5cm]{Personalized Recommendations}
%             \umlusecase[name=trendrec, x=6.5, y=4.5, width=2.5cm]{Trending Recommendations}
%             \umlusecase[name=readreview, y=-2.5]{Read Reviews}
%             \umlusecase[name=writereview, x=-0.25, y=-4]{Write Review}
%             \umlusecase[name=rateitem, x=1, y=-5.5]{Rate Menu Items}
%             \umlusecase[name=editprofile, x=3, y=-7]{Edit Profile}
%         \end{umlsystem}

%         \umlactor[y=-1]{User}
%         \umlactor[y=3]{Guest}
%         \umlactor[y=-5]{Member}
%         \umlactor[x=15]{System}

%         \umlassoc{Guest}{login}
%         \umlassoc{Guest}{signup}
%         \umlassoc{User}{viewrec}
%         \umlassoc{User}{menuinfo}
%         \umlassoc{User}{searchmenu}
%         \umlassoc{User}{readreview}
%         \umlassoc{Member}{writereview}
%         \umlassoc{Member}{rateitem}
%         \umlassoc{Member}{editprofile}
%         \umlassoc{System}{genrec}
%         \umlinclude{viewrec}{genrec}
%         \umlinclude{userrec}{writereview}
%         \umlinclude{userrec}{rateitem}
%         \umlinclude{userrec}{editprofile}
%         \umlinherit{Guest}{User}
%         \umlinherit{Member}{User}
%         \umlinherit{userrec}{genrec}
%         \umlinherit{trendrec}{genrec}

%     \end{tikzpicture}
%     \caption{Use Case Diagram of KU Eater}
%     \label{fig:use-case-diagram}
%     \vspace*{-1in}
% \end{figure}

% Use case diagram (Figure \ref{fig:use-case-diagram}) is a visualization of functionalities that KU Eater provides for end-users. We decided to break
% down the users \textit{(on the left side of figure)} into three groups:

% \begin{itemize}
%     \item \textbf{\textit{User}}---a default group of users which has all the basic functionalities including: Viewing Recommendations, Seeing Menu Details,
%     Searching for Menu Items, and Reading Reviews.
%     \item \textbf{\textit{Guest}}---a group of user which extends from base functionalities, they are able to Sign Up and Login.
%     \item \textbf{\textit{Member}}---an authorized group of user, being able to Write Reviews, Rate Menu Items and Edit their Profiles.
% \end{itemize}
\section{Use Case Model}
\label{section:use-case-model}

% Use Cases Start

\begin{usecase}{Track Individual Across Cameras}
    \textbf{Actors:} Security Officer, \textit{SpotOn} (System)

    \textbf{Description:} A security officer needs to track an individual's movements across multiple camera views within a campus or factory environment.

    \textbf{Scenario:}

    \begin{enumerate}[leftmargin=80pt]
        \item The security officer logs into the \textit{SpotOn} system.
        \item The officer selects a location (e.g., campus or factory).
        \item The officer selects a date for the video feeds.
        \item The system displays the available camera views for the selected location and date.
        \item The system shows all detected people with assigned IDs in each camera's video feed.
        \item The system displays a map showing the locations of detected individuals.
        \item The officer selects an individual in a camera view (e.g., by clicking on their ID or cropped image).
        \item The system highlights that individual across all camera views where they appear and updates their movement history on the map.
    \end{enumerate}
\end{usecase}

\begin{usecase}{Maintain Tracking During Temporary Disappearance}
    \textbf{Actors:} Security Officer, \textit{SpotOn} (System)

    \textbf{Description:} A security officer needs to maintain tracking of an individual even when they are temporarily out of sight of all cameras (e.g., going around a corner).

     \textbf{Scenario:}
    \begin{enumerate}[leftmargin=80pt]
        \item The security officer is tracking an individual using the \textit{SpotOn} system.
        \item The individual moves out of view of all cameras.
        \item The system uses predictive algorithms to estimate the individual's likely location.
        \item When the individual reappears in another camera view, the system automatically re-identifies them and continues tracking.
        \item The system updates the individual's movement history, showing the estimated path during the period of disappearance.
    \end{enumerate}
\end{usecase}

\begin{usecase}{Visualize Movement Paths on a Map}
    \textbf{Actors:} Facility Manager, \textit{SpotOn} (System)

    \textbf{Description:} A facility manager wants to visualize the movement paths of individuals within the facility to analyze space utilization.

    \textbf{Scenario:}

    \begin{enumerate}[leftmargin=80pt]
        \item The facility manager logs into the \textit{SpotOn} system.
        \item The manager selects a location (e.g., campus or factory).
        \item The manager selects a date for analysis.
        \item The system displays a map of the facility.
        \item The system displays the movement paths of individuals (or aggregated movement data) overlaid on the map for the selected date period.
        \item The manager can filter the displayed data (e.g., by specific camera views or time intervals).
    \end{enumerate}
\end{usecase}

\begin{usecase}{Prioritize Tracking of Specific Individual}
    \textbf{Actors:} Security Officer/Emergency Coordinator, \textit{SpotOn} (System)

    \textbf{Description:}  A security officer or emergency coordinator needs to prioritize the tracking of a specific individual.

    \textbf{Scenario:}

    \begin{enumerate}[leftmargin=80pt]
        \item The security officer/emergency coordinator logs into the \textit{SpotOn} system.
        \item The user selects a location and date.
        \item The system displays the available camera views and detected individuals.
        \item The user designates an individual for prioritized tracking (e.g., by selecting from a list of detected individuals).
        \item The system provides prominent visual cues (e.g., highlighting) whenever the prioritized individual is detected in any camera view.
        \item The system displays detailed information about the prioritized individual, including position tracking (status, coordinates, confidence, timestamp), first detection time, current tracking duration, and movement analysis.
    \end{enumerate}
\end{usecase}

% Use Cases End
% \newpage

\section{User Interface Design}
\label{section:user-interface-design}

% The main concept is that KU Eater's interface design prioritizes user-friendliness and an intuitive navigation experience,
% taking inspiration from various successful application platforms. While KU Eater is a web-based application,
% the user interface is presented in a mobile frame to demonstrate the versatility and mobile-first approach that aligns with
% the on-the-go lifestyle of Kasetsart University students.\footnote{Application mockup demonstration is available at: \url{https://www.youtube.com/watch?v=4CBDDqBZ2SA}}
% The figures below are the designs that aligns with our philosophy,

% % Mockup Start

% \begin{figure}[h!]
%     \begin{minipage}{.5\textwidth}
%         \centering
%         \includegraphics[height=0.4\textheight,keepaspectratio]{kueater/mockup/9. Home1 Page.PNG}
%     \end{minipage}%
%     \begin{minipage}{.5\textwidth}
%         \centering
%         \includegraphics[height=0.4\textheight,keepaspectratio]{kueater/mockup/10. Home2 Page.PNG}
%     \end{minipage}
%     \caption{Mockup of Homepage}
%     \vspace*{-\baselineskip}
% \end{figure}

% \begin{figure}[h!]
%     \begin{minipage}{.5\textwidth}
%         \centering
%         \includegraphics[height=0.4\textheight,keepaspectratio]{kueater/mockup/7. Preference Starter2 Page.PNG}
%         \small{\caption{Mockup of User Onboarding}}
%     \end{minipage}%
%     \begin{minipage}{.5\textwidth}
%         \centering
%         \includegraphics[height=0.4\textheight,keepaspectratio]{kueater/mockup/11. Searching Page.PNG}
%         \small{\caption{Mockup of Search Function}}
%     \end{minipage}
%     \vspace*{-\baselineskip}
% \end{figure}

% \begin{figure}[h!]
%     \begin{minipage}{.5\textwidth}
%         \centering
%         \includegraphics[height=0.4\textheight,keepaspectratio]{kueater/mockup/13. Stall Profile1 Page.PNG}
%         \small{\caption{Mockup of Storefront}}
%     \end{minipage}%
%     \begin{minipage}{.5\textwidth}
%         \centering
%         \includegraphics[height=0.4\textheight,keepaspectratio]{kueater/mockup/14. Stall Profile1 Page.PNG}
%         \small{\caption{Mockup of Menu List}}
%     \end{minipage}
%     \vspace*{-\baselineskip}
% \end{figure}


% \begin{figure}[h!t]
%     \begin{minipage}{.5\textwidth}
%         \centering
%         \includegraphics[height=0.4\textheight,keepaspectratio]{kueater/mockup/15. Rating Page.PNG}
%         \small{\caption{Mockup of Review List}}
%     \end{minipage}%
%     \begin{minipage}{.5\textwidth}
%         \centering
%         \includegraphics[height=0.4\textheight,keepaspectratio]{kueater/mockup/16. Rating Modal.PNG}
%         \small{\caption{Mockup of Review Writing}}
%     \end{minipage}
% \end{figure}

% % Mockup End

\newpage

\section{Target and Development System}
\label{section:development-system}

\subsection{Data Preparation}
\label{subsection:data-preparation-system}
% In order to prepare data for KU Eater, proper tooling is needed both for data storage and retrieval. The following list is the technologies we used in data preparation:

% \begin{itemize}[leftmargin=80pt]
%     \item \textbf{Google Sheets:} In order to record interview results such as stall information, list of menu items, we decided to use Google Sheets as our storage for raw data\footnote{The spreadsheet containing the data: \url{https://docs.google.com/spreadsheets/d/1oQ_PykNVvtV5KKtKOrva9aiZeK4S42EuFP9S6qaO4cg}}.
%     The advantage of this tool is that we have faster access to data, especially when we are doing interviews with data holders.
%     \item \textbf{PostgreSQL:} PostgreSQL is a relational database system, one of the advantages that PostgreSQL offers is the synchronous replication, we can use that feature in order to separate between the master data store, and sandbox database for training ML models.
%     PostgreSQL is used as our main datastore. PostgreSQL also has vector support for AI-driven applications.
% \end{itemize}

% \subsection{Recommendation Engine}
% \label{subsection:recommendation-engine}
% KU Eater at its core features a recommendation system, in order to build a consistent and fast service, we chose the following technologies:

% \begin{itemize}[leftmargin=80pt]
%     \item \textbf{gRPC:} A high performant protocol to do Remote Procedure Calls (RPC) that allows us to share schemas between
%     services. This allows for consistent data throughout the application's scope and predictable behavior.
%     \item \textbf{Tonic:} A gRPC server based on the Rust programming language. It is performant and can be
%     used to serve data asynchronously for a near real-time experience.
%     \item \textbf{PostgreSQL:} Like in the step of Data Preparation (\ref{subsection:data-preparation-system}), we can use replication to our advantage to update data in real-time
%     both from autonomous systems or administrator edits.
% \end{itemize}


% \subsection{Web Application}
% \label{subsection:web-application}
% KU Eater as a web-based mobile application, needs an interface designed with a target of mobile phone users in mind.
% In order to complement our requirements, our approach to the development process of the application must be mobile-first.
% The following is the technology stack of KU Eater web application:

% \begin{itemize}[leftmargin=80pt]
%     \item \textbf{React Native:} React Native is a framework based on React that offers powerful data fetching functionalities, built-in caching using existing web technologies etc. \\
%     The framework is native to Javascript, and can ensure its compatibility across devices. It is used as our frontend for the application and a mediator between the backend.
% \end{itemize}